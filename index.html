const webAppUrl = "COLOQUE_A_URL_DA_WEB_APP_AQUI";
let players = [];

document.addEventListener("DOMContentLoaded", () => {
    loadPlayers();
});

function addPlayer() {
    const nameInput = document.getElementById("playerName").value.trim();
    if (name !== "") {
        fetch("COLOQUE_A_URL_DA_WEB_APP_AQUI", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ action: "addPlayer", name })
        }).then(response => response.json())
          .then(data => {
              updateRanking(data);
          });
        document.getElementById("playerName").value = "";
    }
}

function loadPlayers() {
    fetch("COLOQUE_A_URL_DA_WEB_APP_AQUI")
        .then(response => response.json())
        .then(data => {
            players = data;
            updateRanking();
        });
}

function updateRanking() {
    players.sort((a, b) => b.goals - a.gols);
    const rankingList = document.getElementById("ranking");
    rankingList.innerHTML = "";
    players.forEach((player, index) => {
        const li = document.createElement("li");
        li.innerHTML = `${index + 1}. ${player.name} - ${player.goals} gols 
            <button onclick="updateGoals('${player.name}', 1)">+1</button>
            <button onclick="updateGoals('${player.name}', -1)">-1</button>`;
        rankingList.appendChild(li);
    });
}

function updateGoals(name, change) {
    fetch("COLOQUE_A_URL_DA_WEB_APP_AQUI", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name: name, change: change })
    }).then(response => response.json())
      .then(data => {
          players = data;
          updateRanking();
      });
}

function updateRanking() {
    players.sort((a, b) => b.goals - a.goals);
    const rankingList = document.getElementById("ranking");
    rankingList.innerHTML = "";
    players.forEach((player, index) => {
        const li = document.createElement("li");
        li.innerHTML = `${index + 1}. ${player.name} - ${player.goals} gols`;
        rankingList.appendChild(li);
    });
}
